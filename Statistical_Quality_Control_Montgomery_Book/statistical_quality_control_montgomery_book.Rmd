---
title: "Statistical Quality Control Book - Montgomery"
author: "Jeff Li"
date: "`r Sys.Date()`"
output: 
  html_document: 
    toc: true
    toc_depth: 3
    toc_float: true
---

"I maintained my edge by always being a student; you will always have something new to learn". - Jackie Joyner Kersee



## (I) Load Required Libraries
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(pdftools)
```



# 6. control Charts for Variables 

The $\bar{x}$ and R control charts are widely used to monitor the mean and variability of variables. 


## 6.1 Introduction

When dealing with a quality characteristic that is a variable, it is usually necessay to monitor both the mean and variabilit. 

```{r}
# Define upper- and lower- specification limits
upper_specification_limit <- 13
lower_specification_limit <- 7

# simulated data 
set.seed(123)
prod_x <- data.frame(x = rnorm(n = 10000, mean = 10, sd = 1))

# plot
prod_x %>%
  ggplot(aes(x = x)) +
  geom_histogram(bins = 100) + 
  geom_histogram(aes(x = rnorm(n = 10000, mean = 12, sd = 1), alpha = 0.7), bins = 100) +
   geom_histogram(aes(x = rnorm(n = 10000, mean = 10, sd = 2), alpha = 0.7), bins = 100) +
  geom_vline(xintercept = c(upper_specification_limit, lower_specification_limit, 10, 12))

```


## 6.2 Control Charts for X_bar and R 

$\bar{x}$


```{r}
sim <- NULL

for (i in seq(1:1e9)) {
  sim[i] = diff(range(rnorm(n = 5), mean = 0, sd = 1))
}

mean(sim)

```


# 8. Process and Measurement System Capability Analysis

## 8.1 Introcution 

* **Natural tolerance limits of the process**: 
$$UNTL = \mu + 3\sigma$$
$$LNTL = \mu - 3\sigma$$

For a normal distribution, the NTL include 99.73% of the variable, or in another word, only 0.27% of the process output will fall outside the natural tolerarnce limits. 

Process capability analysis is a vital part of an overal quality-improvement program. The major uses include following: 

* 1. Predicting how well the process will hold the tolerances

* 2. Assisting product developers/designers in selecting or modifying a process

* 3. Assisting in establishing an interval between sampling for process monitoring

* 4. Specifying performance requirement for new equipment

* 5. Reducing the variability in a process 

Three primary techniquies used in process capability analysis include: *histograms/probability plots*, *control charts*, and *designed experiments*. 

## 8.2 Process Capability Analysis Using a Histogram or a Probability Plot

### 8.2.1 Using the Histogram

```{r}
dir("data/")
# (a) read the data
bursting_strengths_100_glass_raw <- readxl::read_excel("data/ch08.xlsx", 
                                                   sheet = "table8_1") 

# (b) clean and reformat data
bursting_strengths_100_glass <- str_split(bursting_strengths_100_glass_raw$values, pattern = " " ) %>%
  map(as.numeric) %>%
  unlist() %>%
  as.data.frame() %>%
  select(bursting_strenths_psi = '.')
 
# mean and sd
bursting_strengths_100_glass %>%
  summarise(mean = mean(bursting_strenths_psi), 
            sd = sd(bursting_strenths_psi))

bursting_strengths_100_glass %>%
  ggplot(aes(x = bursting_strenths_psi)) +
  geom_histogram(bins = 9)
```

### 8.2.2 Probability Plotting

