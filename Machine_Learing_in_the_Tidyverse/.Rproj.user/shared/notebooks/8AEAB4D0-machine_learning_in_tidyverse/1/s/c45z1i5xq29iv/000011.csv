"0",""
"0","cv_prep_lr <- cv_models_lr %>% "
"0","  crossing(threshold = c(0:70)/100 ) %>% "
"0","  mutate("
"0","    # Prepare binary vector of actual Attrition values in validate"
"0","    validate_actual = map(validate, ~.x$Attrition == ""Yes""),"
"0","    # Prepare binary vector of predicted Attrition values for validate"
"0","    validate_predicted1 = map2(.x = model, .y = validate, ~predict(.x, .y, type = ""response"") ), "
"0","    validate_predicted = map2(.x = validate_predicted1, .y = threshold, ~.x > .y)"
"0","  ) "
"0",""
"0",""
"0","# Calculate the validate recall for each cross validation fold"
"0","cv_perf_auc <- cv_prep_lr %>% "
"0","  mutate(validate_auc = map2_dbl(validate_actual, validate_predicted, "
"0","                                    ~auc(actual = .x, predicted = .y)))"
"0",""
"0","# Print the validate_recall column"
"0","cv_perf_auc %>%"
"0","  group_by(threshold) %>%"
"0","  summarise(validate_auc_mean = mean(validate_auc)) %>%"
"0","  ggplot(aes(x = threshold, y = validate_auc_mean)) +"
"0","  geom_point()"
